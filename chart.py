import seaborn as sns
import matplotlib.pyplot as plt
import pandas as pd

# ----------------------------------------------------------
# FIXED DETERMINISTIC SYNTHETIC DATA (58 rows, 5 variables)
# ----------------------------------------------------------

data = pd.DataFrame({
    "Customer_Visits": [
        120, 150, 98, 200, 175, 160, 142, 180, 155, 170,
        133, 110, 190, 210, 145, 168, 152, 199, 175, 160,
        122, 134, 189, 156, 177, 142, 155, 198, 188, 176,
        125, 162, 149, 178, 165, 135, 142, 151, 190, 200,
        173, 168, 140, 132, 158, 162, 180, 175, 143, 152,
        167, 188, 199, 145, 132, 158, 170, 160
    ],
    "Time_On_Site": [
        5.2, 6.1, 4.8, 7.5, 6.9, 6.3, 5.9, 7.1, 6.0, 6.4,
        5.1, 4.7, 7.2, 7.8, 5.6, 6.5, 6.0, 7.4, 6.8, 6.3,
        5.0, 5.4, 7.1, 6.1, 6.7, 5.8, 6.0, 7.3, 7.0, 6.6,
        5.3, 6.2, 5.7, 6.9, 6.5, 5.4, 5.8, 5.9, 7.2, 7.6,
        6.7, 6.4, 5.6, 5.1, 6.0, 6.2, 7.0, 6.9, 5.7, 5.8,
        6.3, 7.1, 7.4, 5.6, 5.2, 6.0, 6.5, 6.1
    ],
    "Purchase_Frequency": [
        3.2, 4.0, 2.8, 4.5, 4.1, 3.9, 3.5, 4.3, 3.7, 3.8,
        3.0, 2.9, 4.4, 4.7, 3.4, 4.0, 3.6, 4.5, 4.2, 3.9,
        3.1, 3.3, 4.3, 3.7, 4.1, 3.5, 3.8, 4.6, 4.3, 4.0,
        3.2, 3.9, 3.6, 4.2, 4.0, 3.3, 3.5, 3.7, 4.4, 4.6,
        4.1, 3.9, 3.4, 3.0, 3.7, 3.9, 4.3, 4.1, 3.5, 3.6,
        3.9, 4.3, 4.5, 3.4, 3.1, 3.7, 4.0, 3.8
    ],
    "Satisfaction_Score": [
        88, 92, 80, 96, 94, 90, 87, 95, 91, 93,
        84, 79, 95, 97, 86, 92, 89, 96, 94, 90,
        82, 85, 95, 89, 93, 87, 90, 96, 95, 92,
        83, 91, 88, 94, 92, 84, 86, 89, 96, 97,
        93, 91, 87, 82, 90, 91, 95, 94, 88, 89,
        92, 95, 96, 86, 83, 90, 92, 91
    ],
    "Engagement_Score": [
        72, 78, 65, 82, 80, 76, 70, 81, 75, 77,
        68, 63, 81, 84, 71, 77, 73, 82, 80, 76,
        66, 70, 81, 74, 79, 71, 75, 83, 81, 78,
        68, 76, 72, 80, 78, 69, 71, 73, 82, 84,
        79, 77, 70, 66, 74, 76, 81, 80, 72, 73,
        77, 81, 83, 70, 67, 74, 78, 76
    ]
})

# ----------------------------------------------------------
# CORRELATION MATRIX
# ----------------------------------------------------------
corr = data.corr()

# ----------------------------------------------------------
# SEABORN HEATMAP (Validator-compatible)
# ----------------------------------------------------------
sns.set(style="white", context="talk")

plt.figure(figsize=(8, 8), dpi=64)  # EXACT 512Ã—512

sns.heatmap(
    corr,
    annot=True,
    fmt=".2f",
    cmap="coolwarm",   # expected palette
    square=True,
    cbar=True
)

plt.title("Customer Engagement Correlation Matrix", fontsize=16)

plt.savefig("chart.png", dpi=64)
plt.close()
